{% extends "base.html" %}
{% load static %}


{% block content %}
    <div class="profile-flex">
        <div class="profile-flex-avatar">
            {% if user.avatar %}
                <img class="profile-flex-avatar-image" src="{{ user.avatar.url }}" alt="User avatar">
            {% else %}
                <img class="profile-flex-avatar-image" src="{% static 'img/default.png' %}" alt="User avatar">
            {% endif %}
            <h1 class="profile-flex-avatar-username">{{ user.username }}</h1>
        </div>
        <div class="profile-flex-content">
            <h1 class="profile-flex-content-title">Редактирование профиля</h1>

            {% if form.username.errors %}
                {% for error in form.username.errors %}
                    <p class="error-form-text">{{ error }}</p>
                {% endfor %}
            {% endif %}

            {% if form.email.errors %}
                {% for error in form.email.errors %}
                    <p class="error-form-text">{{ error }}</p>
                {% endfor %}
            {% endif %}

            {% if form.avatar.errors %}
                {% for error in form.avatar.errors %}
                    <p class="error-form-text">{{ error }}</p>
                {% endfor %}
            {% endif %}

            {% if form.first_name.errors %}
                {% for error in form.first_name.errors %}
                    <p class="error-form-text">{{ error }}</p>
                {% endfor %}
            {% endif %}

            {% if form.last_name.errors %}
                {% for error in form.last_name.errors %}
                    <p class="error-form-text">{{ error }}</p>
                {% endfor %}
            {% endif %}
            
            <form enctype="multipart/form-data" class="profile-flex-content-form" method="POST">
                {% csrf_token %}
                <label class="main-login-auth-block-label" for="{{ form.username.id_for_label }}">Никнейм</label>
                {{ form.username }}
                <label class="main-login-auth-block-label" for="{{ form.first_name.id_for_label }}">Имя пользователя</label>
                {{ form.first_name }}
                <label class="main-login-auth-block-label" for="{{ form.last_name.id_for_label }}">Фамилия пользователя</label>
                {{ form.last_name }}
                <label class="main-login-auth-block-label" for="{{ form.email.id_for_label }}">Адрес эл. почты</label>
                {{ form.email }}
                <p class="profile-flex-content-helptext">При смене email на новый адрес придет письмо. Подтвердите изменения по ссылке в письме.</p>
                <label class="main-login-auth-block-label" for="{{ form.avatar.id_for_label }}">Аватар</label>
                {{ form.avatar }}
                <p class="profile-flex-content-helptext">Изображение не более 100МБ</p>
                <button class="main-login-auth-block-button" type="submit">Сохранить</button>
            </form>
        </div>
    </div>
{% endblock content %}